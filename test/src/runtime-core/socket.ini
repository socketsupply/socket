[meta]
name = "runtime-core-tests"
type = "extension"

[extension]
# support files
sources[] = ../../deps/ok/ok.h
sources[] = ./harness.cc
sources[] = ./main.cc
sources[] = ./ok.cc

# test files
sources[] = ./codec.cc
sources[] = ./config.cc
sources[] = ./env.cc
sources[] = ./ini.cc
sources[] = ./json.cc
sources[] = ./platform.cc
sources[] = ./preload.cc
sources[] = ./version.cc

[extension.compiler]
flags[] = -fsanitize=undefined-trap
flags[] = -fsanitize-undefined-trap-on-error
flags[] = -ftrap-function=abort
flags[] = -DLIBOK_PRINTF_NEEDS_NEWLINE=0
flags[] = -I../../..
